<!DOCTYPE html>
<html>
<head>
	<title>Sydney Street Art</title>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	<meta charset="utf-8">
	<link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>    
</head>

<body>

	<script src="scripts/navigate_images.js"></script>		
	<script src="scripts/spin.js"></script>	
    
    <div id="gallery_canvas"></div>
        
	<div id="central_footer" class="footer" style="width:100%;visibility:hidden;">
		<div style="display:table;height:100%;width:100%">
			<div style="display:table-cell;text-align:center;vertical-align:middle;font-size:4.8vmin;">Click on a picture to enlarge and get details</div>
		</div>
	</div>

    <script>
        var spinner=new Spinner({color:'#fff', scale:3, lines: 12}).spin(document.getElementById("gallery_canvas"));
    </script>
    
    <script>
        function load_pictures(){
            spinner.stop()
            document.getElementById("central_footer").style.visibility="visible";
            var data_xml=parent.data_xml.responseXML;
            var graffitis=data_xml.getElementsByTagName("graffiti");
            for (i = 0; i < graffitis.length; i++) {
                path=graffitis[i].getElementsByTagName("full_path")[0].childNodes[0].nodeValue;
                if (graffitis[i].getElementsByTagName("width")[0].childNodes[0].nodeValue=="1024") {graffiti_width="26.67vmax"}
                else {graffiti_width="8.44vmax"};
                
                graffiti_status=graffitis[i].getElementsByTagName("status")[0].childNodes;
                if (graffiti_status.length>0) {
                    if (graffiti_status[0].nodeValue=="Removed") {
                        document.getElementById("gallery_canvas").innerHTML=document.getElementById("gallery_canvas").innerHTML+'<img src="'+path+'" style="width:'+graffiti_width+';-webkit-filter:sepia(100%)" onclick="window.open('+"'graffiti.html?id="+i+"','','')"+'">\n';
                    }
                }
                else {
                    document.getElementById("gallery_canvas").innerHTML=document.getElementById("gallery_canvas").innerHTML+'<img src="'+path+'" style="width:'+graffiti_width+'" onclick="window.open('+"'graffiti.html?id="+i+"','','')"+'">\n';
                }
            }           
        }
    </script>
    
    <script>
        $(document).ready(function(){
            $(window).onload=load_pictures();
        });
    </script>
    
	</body>
</html>
